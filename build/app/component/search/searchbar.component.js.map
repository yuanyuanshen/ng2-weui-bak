{"version":3,"sources":["../../src/app/component/search/searchbar.component.ts"],"names":[],"mappings":";;;;;;;;;;;AAAA,sCAA+E;AAC/E,wCAAyE;AAEzE;;;;GAIG;AAqBH,IAAa,oBAAoB;IAK/B,8BACU,UAAsB;QAAtB,eAAU,GAAV,UAAU,CAAY;QAJxB,YAAO,GAAW,iBAAiB,CAAC;QACpC,eAAU,GAAW,EAAE,CAAC;QAoBxB,sBAAiB,GAAe,cAAQ,CAAC,CAAC;QAC1C,qBAAgB,GAAqB,cAAQ,CAAC,CAAC;IAjBnD,CAAC;IAEE,yCAAU,GAAjB,UAAkB,GAAW;QAC3B,EAAE,CAAC,CAAC,GAAG,KAAK,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC;YAC5B,IAAI,CAAC,UAAU,GAAG,GAAG,CAAC;QACxB,CAAC;IACH,CAAC;IAEM,+CAAgB,GAAvB,UAAwB,EAAO;QAC7B,IAAI,CAAC,gBAAgB,GAAG,EAAE,CAAC;IAC7B,CAAC;IAEM,gDAAiB,GAAxB,UAAyB,EAAO;QAC9B,IAAI,CAAC,iBAAiB,GAAG,EAAE,CAAC;IAC9B,CAAC;IAKO,yCAAU,GAAlB;QACE,IAAI,CAAC,OAAO,GAAG,0CAA0C,CAAC;QAC1D,IAAI,CAAC,UAAU,CAAC,aAAa,CAAC,sBAAsB,CAAC,wBAAwB,CAAC,CAAC,CAAC,CAAC,CAAC,KAAK,EAAE,CAAC;IAC5F,CAAC;IAEO,wCAAS,GAAjB;QACE,EAAE,CAAC,CAAC,IAAI,CAAC,KAAK,IAAI,IAAI,CAAC,KAAK,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;YACxC,IAAI,CAAC,OAAO,GAAG,0CAA0C,CAAC;QAC5D,CAAC;QAAC,IAAI,CAAC,CAAC;YACN,IAAI,CAAC,OAAO,GAAG,iBAAiB,CAAC;QACnC,CAAC;IACH,CAAC;IAEO,sCAAO,GAAf;QACE,IAAI,CAAC,KAAK,GAAG,SAAS,CAAC;QACvB,IAAI,CAAC,UAAU,CAAC,aAAa,CAAC,sBAAsB,CAAC,wBAAwB,CAAC,CAAC,CAAC,CAAC,CAAC,KAAK,EAAE,CAAC;IAC5F,CAAC;IAEO,uCAAQ,GAAhB;QACE,IAAI,CAAC,KAAK,GAAG,SAAS,CAAC;QACvB,IAAI,CAAC,OAAO,GAAG,iBAAiB,CAAC;IACnC,CAAC;IAED,sBAAI,uCAAK;aAAT;YACE,MAAM,CAAC,IAAI,CAAC,UAAU,CAAC;QACzB,CAAC;aAED,UAAU,GAAW;YACnB,EAAE,CAAC,CAAC,GAAG,KAAK,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC;gBAC5B,IAAI,CAAC,UAAU,GAAG,GAAG,CAAC;gBACtB,IAAI,CAAC,gBAAgB,CAAC,GAAG,CAAC,CAAC;YAC7B,CAAC;QACH,CAAC;;;OAPA;IAAA,CAAC;IAQJ,2BAAC;AAAD,CA3DA,AA2DC,IAAA;AAzDC;IADC,kBAAW,CAAC,YAAY,CAAC;;qDACkB;AAFjC,oBAAoB;IApBhC,gBAAS,CAAC;QACT,SAAS,EAAE,CAAC;gBACV,KAAK,EAAE,IAAI,EAAE,OAAO,EAAE,yBAAiB,EAAE,WAAW,EAAE,iBAAU,CAAC,cAAM,OAAA,sBAAoB,EAApB,CAAoB,CAAC;aAC7F,CAAC;QACF,QAAQ,EAAE,mBAAmB;QAC7B,QAAQ,EAAE,2sBAaT;KACF,CAAC;qCAOsB,iBAAU;GANrB,oBAAoB,CA2DhC;AA3DY,oDAAoB","file":"searchbar.component.js","sourcesContent":["import { Component, ElementRef, HostBinding, forwardRef } from \"@angular/core\";\nimport { ControlValueAccessor, NG_VALUE_ACCESSOR } from \"@angular/forms\";\n\n/**\n * WeUI 搜索栏组件\n * @class WxSearchbarComponent\n * @attribute {NgModel} - 输入输出变量: 绑定的对象变量\n */\n@Component({\n  providers: [{\n    multi: true, provide: NG_VALUE_ACCESSOR, useExisting: forwardRef(() => WxSearchbarComponent),\n  }],\n  selector: \"div[wx-searchbar]\",\n  template: `\n    <div class=\"weui-search-bar__form\">\n      <div class=\"weui-search-bar__box\" style=\"height: 26px;\">\n        <i class=\"weui-icon-search\"></i>\n        <input type=\"search\" class=\"weui-search-bar__input\" [(ngModel)]=\"value\" (blur)=\"blurInput()\" placeholder=\"搜索\"/>\n        <a style=\"cursor: pointer\" class=\"weui-icon-clear\" *ngIf=\"value\" (click)=\"doClear()\"></a>\n      </div>\n      <label class=\"weui-search-bar__label\" (click)=\"touchLabel()\">\n        <i class=\"weui-icon-search\"></i>\n        <span>搜索</span>\n      </label>\n    </div>\n    <a style=\"cursor: pointer\" class=\"weui-search-bar__cancel-btn\" (click)=\"doCancel()\">取消</a>\n  `,\n})\nexport class WxSearchbarComponent implements ControlValueAccessor {\n  @HostBinding(\"attr.class\")\n  private classes: string = \"weui-search-bar\";\n  private innerValue: string = \"\";\n\n  constructor(\n    private elementRef: ElementRef\n  ) { }\n\n  public writeValue(val: string): void {\n    if (val !== this.innerValue) {\n      this.innerValue = val;\n    }\n  }\n\n  public registerOnChange(fn: any): void {\n    this.onChangeCallback = fn;\n  }\n\n  public registerOnTouched(fn: any): void {\n    this.onTouchedCallback = fn;\n  }\n\n  private onTouchedCallback: () => void = () => { };\n  private onChangeCallback: (_: any) => void = () => { };\n\n  private touchLabel(): void {\n    this.classes = \"weui-search-bar weui-search-bar_focusing\";\n    this.elementRef.nativeElement.getElementsByClassName(\"weui-search-bar__input\")[0].focus();\n  }\n\n  private blurInput(): void {\n    if (this.value && this.value.length > 0) {\n      this.classes = \"weui-search-bar weui-search-bar_focusing\";\n    } else {\n      this.classes = \"weui-search-bar\";\n    }\n  }\n\n  private doClear(): void {\n    this.value = undefined;\n    this.elementRef.nativeElement.getElementsByClassName(\"weui-search-bar__input\")[0].focus();\n  }\n\n  private doCancel(): void {\n    this.value = undefined;\n    this.classes = \"weui-search-bar\";\n  }\n\n  get value(): string {\n    return this.innerValue;\n  };\n\n  set value(val: string) {\n    if (val !== this.innerValue) {\n      this.innerValue = val;\n      this.onChangeCallback(val);\n    }\n  }\n}\n"]}