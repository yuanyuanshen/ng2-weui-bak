{"version":3,"sources":["../../src/app/component/form/slider.component.ts"],"names":[],"mappings":";;;;;;;;;;;AAAA,sCAAkF;AAElF;;;GAGG;AAUH,IAAa,oBAAoB;IAAjC;IAAoC,CAAC;IAAD,2BAAC;AAAD,CAApC,AAAqC,IAAA;AAAxB,oBAAoB;IAThC,gBAAS,CAAC;QACT,IAAI,EAAE;YACJ,OAAO,EAAE,iBAAiB;SAC3B;QACD,QAAQ,EAAE,oBAAoB;QAC9B,QAAQ,EAAE,kFAET;KACF,CAAC;GACW,oBAAoB,CAAI;AAAxB,oDAAoB;AAEjC;;;GAGG;AAUH,IAAa,yBAAyB;IAAtC;IAAyC,CAAC;IAAD,gCAAC;AAAD,CAAzC,AAA0C,IAAA;AAA7B,yBAAyB;IATrC,gBAAS,CAAC;QACT,IAAI,EAAE;YACJ,OAAO,EAAE,wBAAwB;SAClC;QACD,QAAQ,EAAE,0BAA0B;QACpC,QAAQ,EAAE,qCAET;KACF,CAAC;GACW,yBAAyB,CAAI;AAA7B,8DAAyB;AAEtC;;;;;GAKG;AAaH,IAAa,iBAAiB;IAZ9B;QAkBU,gBAAW,GAAyB,IAAI,mBAAY,EAAE,CAAC;QACvD,QAAG,GAAW,CAAC,CAAC;QAChB,WAAM,GAAW,CAAC,CAAC;QACnB,cAAS,GAAW,CAAC,CAAC;IAsBhC,CAAC;IApBQ,uCAAW,GAAlB;QACE,EAAE,CAAC,CAAC,IAAI,CAAC,KAAK,KAAK,SAAS,IAAI,IAAI,CAAC,GAAG,KAAK,SAAS,IAAI,IAAI,CAAC,GAAG,GAAG,CAAC,IAAI,IAAI,CAAC,KAAK,IAAI,CAAC,CAAC,CAAC,CAAC;YAC1F,IAAI,CAAC,GAAG,GAAG,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,GAAG,GAAG,GAAG,CAAC;QACzC,CAAC;IACH,CAAC;IAEM,kCAAM,GAAb,UAAc,KAAU;QACtB,IAAI,QAAQ,GAAG,KAAK,CAAC,MAAM,CAAC,UAAU,CAAC,WAAW,CAAC;QACnD,IAAI,IAAI,GAAG,IAAI,CAAC,SAAS,GAAG,KAAK,CAAC,cAAc,CAAC,CAAC,CAAC,CAAC,OAAO,GAAG,IAAI,CAAC,MAAM,CAAC;QAC1E,IAAI,GAAG,IAAI,GAAG,CAAC,GAAG,CAAC,GAAG,IAAI,GAAG,QAAQ,GAAG,QAAQ,GAAG,IAAI,CAAC;QACxD,IAAI,CAAC,GAAG,GAAI,IAAI,GAAG,QAAQ,GAAG,GAAG,CAAC;QAClC,IAAI,CAAC,KAAK,GAAG,IAAI,GAAG,QAAQ,GAAG,IAAI,CAAC,GAAG,CAAC;QACxC,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;IACpC,CAAC;IAEM,mCAAO,GAAd,UAAe,KAAU;QACvB,IAAI,QAAQ,GAAG,KAAK,CAAC,MAAM,CAAC,UAAU,CAAC,WAAW,CAAC;QACnD,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,GAAG,GAAG,QAAQ,GAAG,GAAG,CAAC;QAC3C,IAAI,CAAC,MAAM,GAAG,KAAK,CAAC,cAAc,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC;IAChD,CAAC;IACH,wBAAC;AAAD,CA/BA,AA+BC,IAAA;AA7BC;IADC,YAAK,EAAE;;8CACY;AAEpB;IADC,YAAK,EAAE;;gDACc;AAEtB;IADC,aAAM,EAAE;8BACY,mBAAY;sDAA8B;AANpD,iBAAiB;IAZ7B,gBAAS,CAAC;QACT,IAAI,EAAE;YACJ,OAAO,EAAE,aAAa;SACvB;QACD,QAAQ,EAAE,gBAAgB;QAC1B,QAAQ,EAAE,iSAKT;KACF,CAAC;GACW,iBAAiB,CA+B7B;AA/BY,8CAAiB","file":"slider.component.js","sourcesContent":["import { Component, Input, Output, OnChanges, EventEmitter } from \"@angular/core\";\r\n\r\n/**\r\n * WeUI 滑块容器组件\r\n * @class WxSliderBoxComponent\r\n */\r\n@Component({\r\n  host: {\r\n    \"class\": \"weui-slider-box\",\r\n  },\r\n  selector: \"div[wx-slider-box]\",\r\n  template: `\r\n    <ng-content select=\"[wx-slider],[wx-slider-box-value]\"></ng-content>\r\n  `,\r\n})\r\nexport class WxSliderBoxComponent { }\r\n\r\n/**\r\n * WeUI 滑块值标签组件\r\n * @class WxSliderBoxValueComponent\r\n */\r\n@Component({\r\n  host: {\r\n    \"class\": \"weui-slider-box__value\",\r\n  },\r\n  selector: \"div[wx-slider-box-value]\",\r\n  template: `\r\n    <ng-content></ng-content>\r\n  `,\r\n})\r\nexport class WxSliderBoxValueComponent { }\r\n\r\n/**\r\n * WeUI 滑块组件\r\n * @class             WxSliderComponent\r\n * @property {number} WxSliderComponent.max   - 输入参数: 最大值\r\n * @property {number} WxSliderComponent.value - 输入输出参数: 当前值\r\n */\r\n@Component({\r\n  host: {\r\n    \"class\": \"weui-slider\",\r\n  },\r\n  selector: \"div[wx-slider]\",\r\n  template: `\r\n    <div class=\"weui-slider__inner\">\r\n      <div [ngStyle]=\"{ 'width': pax+'%' }\" class=\"weui-slider__track\"></div>\r\n      <div [ngStyle]=\"{ 'left': pax+'%' }\" class=\"weui-slider__handler\" (touchmove)=\"doMove($event)\" (touchstart)=\"doStart($event)\"></div>\r\n    </div>\r\n  `,\r\n})\r\nexport class WxSliderComponent implements OnChanges {\r\n  @Input()\r\n  private max: number;\r\n  @Input()\r\n  private value: number;\r\n  @Output()\r\n  private valueChange: EventEmitter<number> = new EventEmitter();\r\n  private pax: number = 0;\r\n  private startX: number = 0;\r\n  private startLeft: number = 0;\r\n\r\n  public ngOnChanges(): void {\r\n    if (this.value !== undefined && this.max !== undefined && this.max > 0 && this.value >= 0) {\r\n      this.pax = this.value / this.max * 100;\r\n    }\r\n  }\r\n\r\n  public doMove(event: any): void {\r\n    let totalLen = event.target.parentNode.offsetWidth;\r\n    let dist = this.startLeft + event.changedTouches[0].clientX - this.startX;\r\n    dist = dist < 0 ? 0 : dist > totalLen ? totalLen : dist;\r\n    this.pax =  dist / totalLen * 100;\r\n    this.value = dist / totalLen * this.max;\r\n    this.valueChange.emit(this.value);\r\n  }\r\n\r\n  public doStart(event: any): void {\r\n    let totalLen = event.target.parentNode.offsetWidth;\r\n    this.startLeft = this.pax * totalLen / 100;\r\n    this.startX = event.changedTouches[0].clientX;\r\n  }\r\n}\r\n"]}