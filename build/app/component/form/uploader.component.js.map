{"version":3,"sources":["../../src/app/component/form/uploader.component.ts"],"names":[],"mappings":";;;;;;;;;;;AAAA,sCAAgF;AA+BhF;;;;;;;;;;GAUG;AA0BH,IAAa,mBAAmB;IAzBhC;QAiCU,aAAQ,GAAiC,IAAI,mBAAY,EAAE,CAAC;QAE5D,cAAS,GAA6B,IAAI,mBAAY,EAAE,CAAC;IAqBnE,CAAC;IAlBQ,uCAAS,GAAhB;QACE,EAAE,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC;YACf,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC;QACxC,CAAC;QAAC,IAAI,CAAC,CAAC;YACN,IAAI,CAAC,YAAY,GAAG,CAAC,CAAC;QACxB,CAAC;IACH,CAAC;IAEO,mCAAK,GAAb;QACE,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC;YACjB,OAAO,EAAE,IAAI;YACb,WAAW,EAAE,IAAI,IAAI,EAAE,CAAC,kBAAkB,EAAE;SAC7C,CAAC,CAAC;IACL,CAAC;IAEO,sCAAQ,GAAhB,UAAiB,IAAgB;QAC/B,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;IAC5B,CAAC;IACH,0BAAC;AAAD,CA/BA,AA+BC,IAAA;AA7BC;IADC,YAAK,EAAE;;kDACc;AAEtB;IADC,YAAK,CAAC,WAAW,CAAC;;qDACM;AAEzB;IADC,YAAK,EAAE;8BACO,KAAK;kDAAa;AAEjC;IADC,aAAM,CAAC,WAAW,CAAC;8BACF,mBAAY;qDAAsC;AAEpE;IADC,aAAM,CAAC,YAAY,CAAC;8BACF,mBAAY;sDAAkC;AAVtD,mBAAmB;IAzB/B,gBAAS,CAAC;QACT,IAAI,EAAE;YACJ,OAAO,EAAE,eAAe;SACzB;QACD,QAAQ,EAAE,kBAAkB;QAC5B,QAAQ,EAAE,85BAkBT;KACF,CAAC;GACW,mBAAmB,CA+B/B;AA/BY,kDAAmB","file":"uploader.component.js","sourcesContent":["import { Component, Input, Output, DoCheck, EventEmitter } from \"@angular/core\";\r\nimport { IconType } from \"../layout/icons.component\";\r\n\r\n/**\r\n * Upload 上传对象定义\r\n * @interface           UploadItem\r\n * @property {string}   UploadItem.imageId       - 图片ID\r\n * @property {string}   UploadItem.imageUrl      - 图片地址\r\n * @property {string}   UploadItem.showStatus    - 是否显示附加信息\r\n * @property {IconType} UploadItem.statusIcon    - 信息图标\r\n * @property {string}   UploadItem.statusMessage - 信息描述\r\n */\r\nexport interface UploadItem {\r\n  imageId?: string;\r\n  imageUrl: string;\r\n  showStatus: boolean;\r\n  statusIcon?: IconType;\r\n  statusMessage?: string;\r\n}\r\n\r\n/**\r\n * Upload 对象点击事件定义\r\n * @interface          ClickAddAction\r\n * @property {boolean} ClickAddAction.click     - 是否点击\r\n * @property {number}  ClickAddAction.timestamp - 点击发生时刻UTC千分秒\r\n */\r\nexport interface ClickAddAction {\r\n  click: boolean;\r\n  timestamp: number;\r\n}\r\n\r\n/**\r\n * WeUI 上传组件\r\n * @class                                   WxUploaderComponent\r\n * @property {string}                       WxUploaderComponent.title      - 输入参数: 控件标题\r\n * @property {number}                       WxUploaderComponent.maxCount   - 输入参数: 最大上传个数\r\n * @property {Array<UploadItem>}            WxUploaderComponent.items      - 输入参数: 上传对象数组\r\n * @property {EventEmitter<ClickAddAction>} WxUploaderComponent.clickAdd   - 输入输出参数: 点击添加按钮调用事件\r\n * @property {EventEmitter<UploadItem>}     WxUploaderComponent.clickItem  - 输入输出参数: 点击已存在文件调用事件\r\n * @event                                   WxUploaderComponent#click-add\r\n * @event                                   WxUploaderComponent#click-item\r\n */\r\n@Component({\r\n  host: {\r\n    \"class\": \"weui-uploader\",\r\n  },\r\n  selector: \"div[wx-uploader]\",\r\n  template: `\r\n    <div class=\"weui-uploader__hd\">\r\n      <p class=\"weui-uploader__title\">{{title}}</p>\r\n      <div class=\"weui-uploader__info\">{{currentCount}}/{{maxCount}}</div>\r\n    </div>\r\n    <div class=\"weui-uploader__bd\">\r\n      <ul class=\"weui-uploader__files\">\r\n        <li class=\"weui-uploader__file\" (click)=\"doSelect(item)\" *ngFor=\"let item of items\" [ngClass]=\"{ 'weui-uploader__file_status': item.showStatus }\" [ngStyle]=\"{ 'background-image': 'url(' + item.imageUrl + ')' }\">\r\n          <div *ngIf=\"item.showStatus\" class=\"weui-uploader__file-content\">\r\n            <i wx-icon *ngIf=\"item.statusIcon\" [type]=\"item.statusIcon\"></i>\r\n            <p *ngIf=\"item.statusMessage\">{{item.statusMessage}}</p>\r\n          </div>\r\n        </li>\r\n      </ul>\r\n      <div class=\"weui-uploader__input-box\">\r\n        <a class=\"weui-uploader__input\" (click)=\"doAdd()\"></a>\r\n      </div>\r\n    </div>\r\n  `,\r\n})\r\nexport class WxUploaderComponent implements DoCheck {\r\n  @Input()\r\n  private title: string;\r\n  @Input(\"max-count\")\r\n  private maxCount: number;\r\n  @Input()\r\n  private items: Array<UploadItem>;\r\n  @Output(\"click-add\")\r\n  private clickAdd: EventEmitter<ClickAddAction> = new EventEmitter();\r\n  @Output(\"click-item\")\r\n  private clickItem: EventEmitter<UploadItem> = new EventEmitter();\r\n  private currentCount: number;\r\n\r\n  public ngDoCheck(): void {\r\n    if (this.items) {\r\n      this.currentCount = this.items.length;\r\n    } else {\r\n      this.currentCount = 0;\r\n    }\r\n  }\r\n\r\n  private doAdd(): void {\r\n    this.clickAdd.emit({\r\n      \"click\": true,\r\n      \"timestamp\": new Date().getUTCMilliseconds(),\r\n    });\r\n  }\r\n\r\n  private doSelect(item: UploadItem): void {\r\n    this.clickItem.emit(item);\r\n  }\r\n}\r\n"]}