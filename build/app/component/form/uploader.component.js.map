{"version":3,"sources":["../../src/app/component/form/uploader.component.ts"],"names":[],"mappings":";;;;;;;;;;;AAAA,sCAAgF;AA+BhF;;;;;;;;;;GAUG;AA0BH,IAAa,mBAAmB;IAzBhC;QAiCU,aAAQ,GAAiC,IAAI,mBAAY,EAAE,CAAC;QAE5D,cAAS,GAA6B,IAAI,mBAAY,EAAE,CAAC;IAqBnE,CAAC;IAlBQ,uCAAS,GAAhB;QACE,EAAE,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC;YACf,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC;QACxC,CAAC;QAAC,IAAI,CAAC,CAAC;YACN,IAAI,CAAC,YAAY,GAAG,CAAC,CAAC;QACxB,CAAC;IACH,CAAC;IAEO,mCAAK,GAAb;QACE,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC;YACjB,OAAO,EAAE,IAAI;YACb,WAAW,EAAE,IAAI,IAAI,EAAE,CAAC,kBAAkB,EAAE;SAC7C,CAAC,CAAC;IACL,CAAC;IAEO,sCAAQ,GAAhB,UAAiB,IAAgB;QAC/B,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;IAC5B,CAAC;IACH,0BAAC;AAAD,CA/BA,AA+BC,IAAA;AA7BC;IADC,YAAK,EAAE;;kDACc;AAEtB;IADC,YAAK,CAAC,WAAW,CAAC;;qDACM;AAEzB;IADC,YAAK,EAAE;8BACO,KAAK;kDAAa;AAEjC;IADC,aAAM,CAAC,WAAW,CAAC;8BACF,mBAAY;qDAAsC;AAEpE;IADC,aAAM,CAAC,YAAY,CAAC;8BACF,mBAAY;sDAAkC;AAVtD,mBAAmB;IAzB/B,gBAAS,CAAC;QACT,IAAI,EAAE;YACJ,OAAO,EAAE,eAAe;SACzB;QACD,QAAQ,EAAE,kBAAkB;QAC5B,QAAQ,EAAE,85BAkBT;KACF,CAAC;GACW,mBAAmB,CA+B/B;AA/BY,kDAAmB","file":"uploader.component.js","sourcesContent":["import { Component, Input, Output, DoCheck, EventEmitter } from \"@angular/core\";\nimport { IconType } from \"../layout/icons.component\";\n\n/**\n * Upload 上传对象定义\n * @interface           UploadItem\n * @property {string}   UploadItem.imageId       - 图片ID\n * @property {string}   UploadItem.imageUrl      - 图片地址\n * @property {string}   UploadItem.showStatus    - 是否显示附加信息\n * @property {IconType} UploadItem.statusIcon    - 信息图标\n * @property {string}   UploadItem.statusMessage - 信息描述\n */\nexport interface UploadItem {\n  imageId?: string;\n  imageUrl: string;\n  showStatus: boolean;\n  statusIcon?: IconType;\n  statusMessage?: string;\n}\n\n/**\n * Upload 对象点击事件定义\n * @interface          ClickAddAction\n * @property {boolean} ClickAddAction.click     - 是否点击\n * @property {number}  ClickAddAction.timestamp - 点击发生时刻UTC千分秒\n */\nexport interface ClickAddAction {\n  click: boolean;\n  timestamp: number;\n}\n\n/**\n * WeUI 上传组件\n * @class                                   WxUploaderComponent\n * @property {string}                       WxUploaderComponent.title      - 输入参数: 控件标题\n * @property {number}                       WxUploaderComponent.maxCount   - 输入参数: 最大上传个数\n * @property {Array<UploadItem>}            WxUploaderComponent.items      - 输入参数: 上传对象数组\n * @property {EventEmitter<ClickAddAction>} WxUploaderComponent.clickAdd   - 输入输出参数: 点击添加按钮调用事件\n * @property {EventEmitter<UploadItem>}     WxUploaderComponent.clickItem  - 输入输出参数: 点击已存在文件调用事件\n * @event                                   WxUploaderComponent#click-add\n * @event                                   WxUploaderComponent#click-item\n */\n@Component({\n  host: {\n    \"class\": \"weui-uploader\",\n  },\n  selector: \"div[wx-uploader]\",\n  template: `\n    <div class=\"weui-uploader__hd\">\n      <p class=\"weui-uploader__title\">{{title}}</p>\n      <div class=\"weui-uploader__info\">{{currentCount}}/{{maxCount}}</div>\n    </div>\n    <div class=\"weui-uploader__bd\">\n      <ul class=\"weui-uploader__files\">\n        <li class=\"weui-uploader__file\" (click)=\"doSelect(item)\" *ngFor=\"let item of items\" [ngClass]=\"{ 'weui-uploader__file_status': item.showStatus }\" [ngStyle]=\"{ 'background-image': 'url(' + item.imageUrl + ')' }\">\n          <div *ngIf=\"item.showStatus\" class=\"weui-uploader__file-content\">\n            <i wx-icon *ngIf=\"item.statusIcon\" [type]=\"item.statusIcon\"></i>\n            <p *ngIf=\"item.statusMessage\">{{item.statusMessage}}</p>\n          </div>\n        </li>\n      </ul>\n      <div class=\"weui-uploader__input-box\">\n        <a class=\"weui-uploader__input\" (click)=\"doAdd()\"></a>\n      </div>\n    </div>\n  `,\n})\nexport class WxUploaderComponent implements DoCheck {\n  @Input()\n  private title: string;\n  @Input(\"max-count\")\n  private maxCount: number;\n  @Input()\n  private items: Array<UploadItem>;\n  @Output(\"click-add\")\n  private clickAdd: EventEmitter<ClickAddAction> = new EventEmitter();\n  @Output(\"click-item\")\n  private clickItem: EventEmitter<UploadItem> = new EventEmitter();\n  private currentCount: number;\n\n  public ngDoCheck(): void {\n    if (this.items) {\n      this.currentCount = this.items.length;\n    } else {\n      this.currentCount = 0;\n    }\n  }\n\n  private doAdd(): void {\n    this.clickAdd.emit({\n      \"click\": true,\n      \"timestamp\": new Date().getUTCMilliseconds(),\n    });\n  }\n\n  private doSelect(item: UploadItem): void {\n    this.clickItem.emit(item);\n  }\n}\n"]}